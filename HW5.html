<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.0.36">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>719HW5</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="HW5_files/libs/clipboard/clipboard.min.js"></script>
<script src="HW5_files/libs/quarto-html/quarto.js"></script>
<script src="HW5_files/libs/quarto-html/popper.min.js"></script>
<script src="HW5_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="HW5_files/libs/quarto-html/anchor.min.js"></script>
<link href="HW5_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="HW5_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="HW5_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="HW5_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="HW5_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">719HW5</h1>
</div>



<div class="quarto-title-meta">

    
    
  </div>
  

</header>

<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(pander)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="table">
<caption>Deaths from Leukemia and Other Cancers</caption>
<thead>
<tr class="header">
<th>Deaths</th>
<th>0</th>
<th>1-9</th>
<th>10-49</th>
<th>50-99</th>
<th>100-199</th>
<th>200+</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Leukemia</td>
<td>13</td>
<td>5</td>
<td>5</td>
<td>3</td>
<td>4</td>
<td>18</td>
</tr>
<tr class="even">
<td>Other Cancers</td>
<td>378</td>
<td>200</td>
<td>151</td>
<td>47</td>
<td>31</td>
<td>33</td>
</tr>
<tr class="odd">
<td>Total</td>
<td>391</td>
<td>205</td>
<td>156</td>
<td>50</td>
<td>35</td>
<td>51</td>
</tr>
</tbody>
</table>
<section id="creating-dataframe" class="level2">
<h2 class="anchored" data-anchor-id="creating-dataframe">Creating Dataframe</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>dose <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"0"</span>, <span class="st">"1-9"</span>, <span class="st">"10-49"</span>, <span class="st">"50-99"</span>, <span class="st">"100-199"</span>, <span class="st">"200+"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>leukemia <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">13</span>, <span class="dv">5</span>,<span class="dv">5</span>,<span class="dv">3</span>,<span class="dv">4</span>,<span class="dv">18</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>other <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">378</span>, <span class="dv">200</span>, <span class="dv">151</span>, <span class="dv">47</span>, <span class="dv">31</span>, <span class="dv">33</span>)</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>total <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">391</span>, <span class="dv">205</span>, <span class="dv">156</span>, <span class="dv">50</span>, <span class="dv">35</span>, <span class="dv">51</span>)</span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>numeric_dose <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">5</span>, <span class="dv">59</span><span class="sc">/</span><span class="dv">2</span>, <span class="dv">149</span><span class="sc">/</span><span class="dv">2</span>, <span class="dv">299</span><span class="sc">/</span><span class="dv">2</span>, <span class="dv">250</span>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">cbind</span>(dose, leukemia, other, total, numeric_dose))</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>leukemia <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(df<span class="sc">$</span>leukemia)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>other <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(df<span class="sc">$</span>other)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>total <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(df<span class="sc">$</span>total)</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>df<span class="sc">$</span>numeric_dose <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(df<span class="sc">$</span>numeric_dose)</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     dose leukemia other total numeric_dose
1       0       13   378   391          0.0
2     1-9        5   200   205          5.0
3   10-49        5   151   156         29.5
4   50-99        3    47    50         74.5
5 100-199        4    31    35        149.5
6    200+       18    33    51        250.0</code></pre>
</div>
</div>
</section>
<section id="a" class="level1">
<h1>A)</h1>
<section id="logit" class="level2">
<h2 class="anchored" data-anchor-id="logit">Logit</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>fit.logit <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="fu">cbind</span>(leukemia, total<span class="sc">-</span>leukemia)<span class="sc">~</span>numeric_dose, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link=</span><span class="st">"logit"</span>), <span class="at">data=</span>df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="probit" class="level2">
<h2 class="anchored" data-anchor-id="probit">Probit</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>fit.probit <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="fu">cbind</span>(leukemia, total<span class="sc">-</span>leukemia)<span class="sc">~</span>numeric_dose, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link=</span><span class="st">"probit"</span>), <span class="at">data=</span>df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="cloglog" class="level2">
<h2 class="anchored" data-anchor-id="cloglog">Cloglog</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>fit.cloglog <span class="ot">&lt;-</span> <span class="fu">glm</span>(<span class="fu">cbind</span>(leukemia, total<span class="sc">-</span>leukemia)<span class="sc">~</span>numeric_dose, <span class="at">family=</span><span class="fu">binomial</span>(<span class="at">link=</span><span class="st">"cloglog"</span>), <span class="at">data=</span>df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="comparison" class="level2">
<h2 class="anchored" data-anchor-id="comparison">Comparison</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>observed_vals <span class="ot">&lt;-</span> df[<span class="st">"leukemia"</span>]</span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>logit_vals <span class="ot">&lt;-</span> <span class="fu">round</span>(df[,<span class="st">"total"</span>]<span class="sc">*</span>fit.logit<span class="sc">$</span>fitted.values, <span class="at">digits=</span><span class="dv">2</span>)</span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>probit_vals <span class="ot">&lt;-</span> <span class="fu">round</span>(df[,<span class="st">"total"</span>]<span class="sc">*</span>fit.probit<span class="sc">$</span>fitted.values, <span class="at">digits=</span><span class="dv">2</span>)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>cloglog_vals <span class="ot">&lt;-</span> <span class="fu">round</span>(df[,<span class="st">"total"</span>]<span class="sc">*</span>fit.cloglog<span class="sc">$</span>fitted.values, <span class="at">digits=</span><span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 28%">
<col style="width: 23%">
<col style="width: 23%">
<col style="width: 24%">
</colgroup>
<thead>
<tr class="header">
<th>Observed</th>
<th>Logit</th>
<th>Probit</th>
<th>Cloglog</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>13</td>
<td>10.76</td>
<td>10.49</td>
<td>10.87</td>
</tr>
<tr class="even">
<td>5</td>
<td>5.97</td>
<td>5.89</td>
<td>6.01</td>
</tr>
<tr class="odd">
<td>5</td>
<td>5.98</td>
<td>6.2</td>
<td>5.94</td>
</tr>
<tr class="even">
<td>3</td>
<td>3.15</td>
<td>3.43</td>
<td>3.06</td>
</tr>
<tr class="odd">
<td>4</td>
<td>4.83</td>
<td>5.22</td>
<td>4.64</td>
</tr>
<tr class="even">
<td>18</td>
<td>17.32</td>
<td>16.8</td>
<td>17.54</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>logit_sum <span class="ot">&lt;-</span> <span class="fu">summary</span>(fit.logit)</span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>logit_coef <span class="ot">&lt;-</span> logit_sum<span class="sc">$</span>coefficients</span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>probit_sum <span class="ot">&lt;-</span> <span class="fu">summary</span>(fit.probit)</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>probit_coef <span class="ot">&lt;-</span> probit_sum<span class="sc">$</span>coefficients</span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>cloglog_sum <span class="ot">&lt;-</span> <span class="fu">summary</span>(fit.cloglog)</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>cloglog_coef <span class="ot">&lt;-</span> cloglog_sum<span class="sc">$</span>coefficients</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
<col style="width: 12%">
</colgroup>
<thead>
<tr class="header">
<th>Link Function</th>
<th><span class="math inline">\(\hat{\beta_0}\)</span></th>
<th>SE(<span class="math inline">\(\hat{\beta_0}\)</span>)</th>
<th><span class="math inline">\(\hat{\beta_1}\)</span></th>
<th>SE(<span class="math inline">\(\hat{\beta_1}\)</span>)</th>
<th>Null Deviance</th>
<th>Residual Deviance</th>
<th>AIC</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Logit</td>
<td>-3.565</td>
<td>0.212</td>
<td>0.012</td>
<td>0.001</td>
<td>1.021</td>
<td>1.021</td>
<td>26.686</td>
</tr>
<tr class="even">
<td>Probit</td>
<td>-1.929</td>
<td>0.092</td>
<td>0.006</td>
<td>0.001</td>
<td>1.525</td>
<td>1.525</td>
<td>27.19</td>
</tr>
<tr class="odd">
<td>Cloglog</td>
<td>-3.569</td>
<td>0.208</td>
<td>0.011</td>
<td>0.001</td>
<td>0.876</td>
<td>0.876</td>
<td>26.541</td>
</tr>
</tbody>
</table>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">plot</span>(df<span class="sc">$</span>numeric_dose, df<span class="sc">$</span>leukemia<span class="sc">/</span>df<span class="sc">$</span>total, <span class="at">pch=</span><span class="dv">19</span>,<span class="at">ylab=</span><span class="st">"Proportion of Leukemia"</span>, <span class="at">xlab=</span><span class="st">"Log dosage"</span>)</span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>numeric_dose, <span class="fu">fitted</span>(fit.logit))</span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>numeric_dose, <span class="fu">fitted</span>(fit.probit), <span class="at">lty=</span><span class="dv">2</span>)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a><span class="fu">lines</span>(df<span class="sc">$</span>numeric_dose, <span class="fu">fitted</span>(fit.cloglog), <span class="at">lty=</span><span class="dv">3</span>)</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="fu">legend</span>(<span class="st">"topleft"</span>, <span class="fu">c</span>(<span class="st">"Logit"</span>, <span class="st">"Probit"</span>, <span class="st">"Cloglog"</span>), <span class="at">lty=</span><span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">3</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="HW5_files/figure-html/unnamed-chunk-16-1.png" class="img-fluid" width="672"></p>
</div>
</div>
</section>
</section>
<section id="b" class="level1">
<h1>B)</h1>
<p>The model that fits the data best is the cloglog model, but the logit model is very similar in AIC, standard error of parameter estimates, and deviance. Since the logit model is easier to interpret, I will select that model as my final and “best” model. This can be somewhat seen in the above plot as well, comparing each of the three fitted models with each other. The probit model is what stands out most, as it is the farthest away from the data points at each point that can be deciphered.</p>
</section>
<section id="c" class="level1">
<h1>C)</h1>
<p><em>Interpret results of best model</em></p>
<p><span class="math display">\[
logit(p) = \hat{\beta_0} + \hat{\beta_1} X_1
\]</span></p>
<p><span class="math display">\[
logit(p) = -3.57 + 0.012X_1
\]</span></p>
<p><span class="math display">\[
logit(\frac{\text{Leukemia Odds}}{\text{All Cancer Odds}}) = -3.57 + 0.012(\text{dose})
\]</span></p>
<p>Based off of this model, we can say that a 1 unit dose increase results in a 0.012 increase in <span class="math inline">\(logit(p)\)</span> , which based off of the definition of the logit link function, is a 0.012 increase in <span class="math inline">\(log(\frac{p}{1-p})\)</span> , which is the log odds ratio. This can further be interpreted to mean a <span class="math inline">\(exp(0.012) = 1.012\)</span> increase, or a 1.2% increase in the odds of having leukemia compared to having any form of cancer.</p>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    setTimeout(function() {
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      let href = ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const cites = ref.parentNode.getAttribute('data-cites').split(' ');
    tippyHover(ref, function() {
      var popup = window.document.createElement('div');
      cites.forEach(function(cite) {
        var citeDiv = window.document.createElement('div');
        citeDiv.classList.add('hanging-indent');
        citeDiv.classList.add('csl-entry');
        var biblioDiv = window.document.getElementById('ref-' + cite);
        if (biblioDiv) {
          citeDiv.innerHTML = biblioDiv.innerHTML;
        }
        popup.appendChild(citeDiv);
      });
      return popup.innerHTML;
    });
  }
});
</script>
</div> <!-- /content -->



</body></html>